<?php
//require_once '../includes/dbconnect.php';
require_once ("file:///C:/xampp/htdocs/dompdf/dompdf_config.inc.php");
spl_autoload_register('DOMPDF_autoload');
 
$db_hostname= "localhost";
$db_username= "root";            
$db_password= ""; 
$db_database= "project2"; 
 
//Connect to server.
$link = mysqli_connect($db_hostname, $db_username, $db_password);
if (!$link) {
die('Not connected : ' . mysqli_error());   
}
 
//check for connection errors
 
if(mysqli_connect_errno()) { 
//echo "Error: Could not connect to database.";
exit;
}
 
//Select the database.
$db_selected = mysqli_select_db($link, $db_database);
if (!$db_selected) {
die ('Cant use database : ' . mysqli_error());
}
 
$query="SELECT * FROM users WHERE admin='0'";
$result=mysqli_query($link,$query);
 
while($row = mysqli_fetch_assoc($result))
{   
 
$fullnames= $row["fullnames"];
$username= $row["username"];
$email= $row["email"];
$mobile_no= $row["mobile_no"];
$usertype= $row["usertype"];
 
?>
<?php
$paper= "letter";
$orientation= "portrait";
$html= '<!doctype html>
<html>
<body>
<center><u>Registered Users List</u></center>
<ul data-role="listview">
<li>Fullnames: <b>'.$fullnames.'</b></li>
<li>Username: <b>'.$username.'</b></li>
<li>Email: <b>'.$email.'</b></li>
<li>Mobile No: <b>'.$mobile_no.'</b></li>
<li>Usertype: <b>'.$usertype.'</b></li>
<hr>
</ul>
</body></html>';
}
?>   
<?php    
 
ob_start();
$dompdf = new DOMPDF();
$dompdf->set_paper($paper, $orientation);
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("my_pdf.pdf", array("Attachment" => 0));
//$pdf = $dompdf->output();
//file_put_contents("saved_pdf.pdf", $pdf);
ob_end_flush();
exit(0);
//mysqli_close($link);
?>